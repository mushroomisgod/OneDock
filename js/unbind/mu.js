var accountport=document.getElementById("accountport"),dashport=document.getElementById("dashport"),databaseport=document.getElementById("databaseport"),accountCreate=document.getElementById("accountCreate"),accountLogin=document.getElementById("accountLogin"),acEm=document.getElementById("acEm"),acPwO=document.getElementById("acPwO"),acPwT=document.getElementById("acPwT"),acCAbtn=document.getElementById("acCAbtn"),acLIsw=document.getElementById("acLIsw"),addDBsiteBTN=document.getElementById("addDBsiteBTN"),dibSpan=document.getElementById("dibSpan"),addToWebsite=document.getElementById("addToWebsite"),dbWindowContent=document.getElementById("dbWindowContent"),dbWindowContentFiltered=document.getElementById("dbWindowContentFiltered"),usrWindowContent=document.getElementById("usrWindowContent"),usrFilterContent=document.getElementById("usrFilterContent"),lgEm=document.getElementById("lgEm"),lgPw=document.getElementById("lgPw"),lgLAbtn=document.getElementById("lgLAbtn"),lgACsw=document.getElementById("lgACsw"),nuDBbtn=document.getElementById("nuDBbtn"),closeSpan=document.getElementsByClassName("close")[0],closeTwo=document.getElementsByClassName("close")[1],nuDBname=document.getElementById("nuDBname"),nuDBid=document.getElementById("nuDBid"),nuDBsubmit=document.getElementById("nuDBsubmit"),noDBmade=document.getElementById("noDBmade"),allDBwrapper=document.getElementById("allDBwrapper"),logoutUserBtn=document.getElementById("logoutUserBtn"),homeBtn=document.getElementById("homeBtn"),addDatabaseToSiteModal=document.getElementById("addDatabaseToSiteModal"),addDatabaseToSiteModalContent=document.getElementById("addDatabaseToSiteModalContent"),copyCode=document.getElementById("copyCode"),addToSiteCopyarea=document.getElementById("addToSiteCopyarea"),selectedDBid="",ownedDBid=[];function init(){"true"==localStorage.dbExists&&(noDBmade.style.display="none",document.getElementById("loadingDB").style.display="block"),document.getElementById("splashport").style.display="none",document.getElementById("programport").style.display="block",accountLogin.style.display="none",allDBwrapper.style.display="none",document.getElementById("nuDBmodalContent").style.left=(window.innerWidth-368)/2+"px",document.getElementById("addDatabaseToSiteModalContent").style.left=(window.innerWidth-650)/2+"px",allDBwrapper.style.height=window.innerHeight-51-10+"px",localStorage.loggedUN?(accountport.style.display="none",dashport.style.display="block"):(accountport.style.display="block",dashport.style.display="none"),databaseport.style.display="none"}function scale(){document.getElementById("nuDBmodalContent").style.left=(window.innerWidth-368)/2+"px",document.getElementById("addDatabaseToSiteModalContent").style.left=(window.innerWidth-650)/2+"px",allDBwrapper.style.height=window.innerHeight-51-10+"px"}function thirdPartyCall(){document.getElementById("nuDBmodal").style.display="block"}function updateDBlist(){if(0!=dbIDcont.length)for(noDBmade.style.display="none",document.getElementById("loadingDB").style.display="none",allDBwrapper.style.display="block",allDBwrapper.innerHTML="",i=0;i<dbIDcont.length;i++)allDBwrapper.innerHTML+="<button class='dbListBtn' ref='クリックして開く' onclick='openDB(\""+dbIDcont[i]+"\")'><div class='serverSmallIconWrapper'><img src='img/icons/dbCol.svg' height='30px'></div><div class='dbNameWrapper'>"+dbNMcont[i]+"</div><div class='dbIDwrapper'>"+dbIDcont[i]+"</div></button>";else noDBmade.style.display="block",allDBwrapper.style.display="none"}function openDB(e){dashport.style.display="none",databaseport.style.display="block",selectedDBid=e,updateDatabaseViewer(dibSpan.innerHTML=e),addToSiteCopyarea.value='<od id="OneDockDBTag">'+e+'</od>\n<script src="https://mushroomisgod.github.io/OneDock/lib/onedock.min.js" ><\/script>\n<link rel="stylesheet" href="https://mushroomisgod.github.io/OneDock/lib/onedock.min.css"><script>\nOneDock.init(OneDock.databaseId);\n<\/script>',document.getElementById("dbNameHeader").innerHTML=e}function updateDatabaseViewer(e){for(dbWindowContent.innerHTML="",i=0;i<allDBcontentHub.length;i++){var t=allDBcontentHub[i];if(t.databaseId==e)if("customData"==t.dcat){var n=JSON.stringify(t).split("{")[1].split("}")[0].split(","),l=[];for(o=0;o<n.length;o++)-1==n[o].search("databaseId")&&-1==n[o].search("dcat")&&-1==n[o].search("type")&&l.push("<div class='tagTitle'>"+n[o].split(":")[0].split('"')[1]+"</div><div class='tagContent'>"+n[o].split(":")[1].split('"')[1]+"</div>");dbWindowContent.innerHTML+="<div class='dataSetWrapper'>"+l.join(" ")+"</div><as></as>"}else if("accountDtx"==t.dcat)usrWindowContent.innerHTML="",usrWindowContent.innerHTML+="<div class='userSetWrapper'>"+t.em+"<button class='onlineStatusUsr' id='onlineStatusFor"+t.em+"'>オフライン</button></div><aw></aw>";else if("userStatus"==t.dcat){var d="onlineStatusFor"+t.em;"online"==t.status?(document.getElementById(d).disabled=!0,document.getElementById(d).innerHTML="オンライン"):(document.getElementById(d).disabled=!1,document.getElementById(d).innerHTML="オフライン")}}}function showDataTab(){document.getElementById("databaseContentViewer").style.display="block",document.getElementById("dataViewTab").disabled=!0,document.getElementById("userViewTab").disabled=!1,document.getElementById("userContentViewer").style.display="none"}function showUserTab(){document.getElementById("databaseContentViewer").style.display="none",document.getElementById("dataViewTab").disabled=!1,document.getElementById("userViewTab").disabled=!0,document.getElementById("userContentViewer").style.display="block"}function filterDatabase(e){if(""==e.value)dbWindowContent.style.display="block",dbWindowContentFiltered.style.display="none";else{var t=dbWindowContent.innerHTML.split("<as></as>");for(dbWindowContent.style.display="none",dbWindowContentFiltered.style.display="block",dbWindowContentFiltered.innerHTML="",i=0;i<t.length-1;i++)-1!=t[i].search(e.value)&&(dbWindowContentFiltered.innerHTML+=t[i])}}function filterUsers(e){if(""==e.value)usrWindowContent.style.display="block",usrFilterContent.style.display="none";else{var t=usrWindowContent.innerHTML.split("<aw></aw>");for(usrWindowContent.style.display="none",usrFilterContent.style.display="block",usrFilterContent.innerHTML="",i=0;i<t.length-1;i++)-1!=t[i].search(e.value)&&(usrFilterContent.innerHTML+=t[i])}}nuDBbtn.onclick=function(){document.getElementById("nuDBmodal").style.display="block"},closeSpan.onclick=function(){document.getElementById("nuDBmodal").style.display="none"},window.onclick=function(e){e.target==document.getElementById("nuDBmodal")&&(document.getElementById("nuDBmodal").style.display="none")},logoutUserBtn.onclick=function(){localStorage.clear(),location.reload()},acLIsw.onclick=function(){accountCreate.style.display="none",accountLogin.style.display="block"},lgACsw.onclick=function(){accountCreate.style.display="block",accountLogin.style.display="none"},acEm.onkeyup=function(){0!=acEm.value.length&&0!=acPwO.value.length&&0!=acPwO.value.length&&acPwO.value==acPwT.value?acCAbtn.disabled=!1:acCAbtn.disabled=!0},acPwO.onkeyup=function(){0!=acEm.value.length&&0!=acPwO.value.length&&0!=acPwO.value.length&&acPwO.value==acPwT.value?acCAbtn.disabled=!1:acCAbtn.disabled=!0},acPwT.onkeyup=function(){0!=acEm.value.length&&0!=acPwO.value.length&&0!=acPwO.value.length&&acPwO.value==acPwT.value?acCAbtn.disabled=!1:acCAbtn.disabled=!0},lgEm.onkeyup=function(){0!=lgEm.value.length&&0!=lgPw.value.length?lgLAbtn.disabled=!1:lgLAbtn.disabled=!0},lgPw.onkeyup=function(){0!=lgEm.value.length&&0!=lgPw.value.length?lgLAbtn.disabled=!1:lgLAbtn.disabled=!0},acPwT.onblur=function(){acPwO.value==acPwT.value?pswNotMatchAC.style.display="none":pswNotMatchAC.style.display="block"},acPwO.onblur=function(){0!=acPwT.value.length?acPwO.value==acPwT.value?pswNotMatchAC.style.display="none":pswNotMatchAC.style.display="block":pswNotMatchAC.style.display="none"},nuDBname.onkeyup=function(){0!=nuDBname.value.length?(nuDBsubmit.disabled=!1,nuDBid.value=localStorage.loggedUN.split("@")[0]+"-"+nuDBname.value):(nuDBsubmit.disabled=!0,nuDBid.value="")},addDBsiteBTN.onclick=function(){addDatabaseToSiteModal.style.display="block"},closeTwo.onclick=function(){addDatabaseToSiteModal.style.display="none"},window.onclick=function(e){e.target==document.getElementById("addDatabaseToSiteModal")&&(document.getElementById("addDatabaseToSiteModal").style.display="none")},homeBtn.onclick=function(){databaseport.style.display="none",dashport.style.display="block"},copyCode.onclick=function(){addToSiteCopyarea.select(),document.execCommand("copy"),copyCode.innerHTML="コピーされました",copyCode.disabled=!0,setTimeout(function(){copyCode.innerHTML="コードをコピー",copyCode.disabled=!1},1e3)};
